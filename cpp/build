#clang++-10 -v -O3 -fcoroutines-ts -std=c++20 -I include -I makham/include -I makham/include/felspar/makham src/parser.cpp -stdlib=libc++ -o bin/parser


# -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic

## libparser.a
#rm bin/parser.o
#rm bin/libparser.a
#clang++-10 -v -c -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -Wno-unused-parameter -I include -I makham/include -I makham/include/felspar/makham  -I doctest src/parser.cpp -stdlib=libc++ -o bin/parser.o
#llvm-ar-10 -rc bin/libparser.a bin/parser.o 

## test_parser
#rm bin/test_parser
#clang++-10 -v -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham  -I doctest tests/test_parser.cpp -stdlib=libc++ bin/libparser.a -o bin/test_parser
#perf stat bin/test_parser < tests/data/parseme.a4

## test_typing
#rm bin/test_typing
#clang++-10 -v -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham  -I doctest tests/test_typing.cpp -stdlib=libc++ -o bin/test_typing
#perf stat bin/test_typing 

## libtype.a
#rm bin/type.o
#rm bin/operation.o
#rm bin/stack.o
#rm bin/libtype.a
#rm bin/libparser.o
#clang++-10 -v -c -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/type.cpp -stdlib=libc++ -o bin/type.o
#clang++-10 -v -c -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/operation.cpp -stdlib=libc++ -o bin/operation.o
#clang++-10 -v -c -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/stack.cpp -stdlib=libc++ -o bin/stack.o
#clang++-10 -v -c -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -Wno-unused-parameter -I include -I makham/include -I makham/include/felspar/makham  -I doctest src/parser.cpp -stdlib=libc++ -o bin/parser.o

#llvm-ar-10 -rc bin/libtype.a bin/stack.o bin/type.o bin/operation.o

## test_stack
#rm bin/test_stack
#clang++-10 -v -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest tests/test_stack.cpp -stdlib=libc++ bin/libtype.a -o bin/test_stack
#perf stat bin/test_stack -s -d

## test_type
#rm bin/test_type
#clang++-10 -v -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest tests/test_type.cpp -stdlib=libc++ bin/libtype.a -o bin/test_type
#perf stat bin/test_type -s -d

## test_type
#rm bin/test_operation
#clang++-10 -v -O3 -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest tests/test_operation.cpp -stdlib=libc++ bin/libtype.a -o bin/test_operation
#perf stat bin/test_operation -s -d


# libtype.a
rm bin/type.o
rm bin/operation.o
rm bin/stack.o
rm bin/parser.o
rm bin/libtype.a
clang++-10 -v -c -fprofile-instr-generate -fcoverage-mapping -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/type.cpp -stdlib=libc++ -o bin/type.o
clang++-10 -v -c -fprofile-instr-generate -fcoverage-mapping -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/operation.cpp -stdlib=libc++ -o bin/operation.o
clang++-10 -v -c -fprofile-instr-generate -fcoverage-mapping -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/stack.cpp -stdlib=libc++ -o bin/stack.o
clang++-10 -v -c -fprofile-instr-generate -fcoverage-mapping -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -Wno-unused-parameter -I include -I makham/include -I makham/include/felspar/makham  -I doctest src/parser.cpp -stdlib=libc++ -o bin/parser.o
llvm-ar-10 -rc bin/libtype.a bin/stack.o bin/type.o bin/operation.o bin/parser.o

# test_stack
rm bin/test_stack
rm bin/test_stack.profraw
clang++-10 -v -fprofile-instr-generate -fcoverage-mapping -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest tests/test_stack.cpp -stdlib=libc++ bin/libtype.a -o bin/test_stack
LLVM_PROFILE_FILE="bin/test_stack.profraw" bin/test_stack -s -d

#rm bin/test_stack.llvm-profdata
#llvm-profdata-10 merge -sparse bin/test_stack.profraw -o bin/test_stack.llvm-profdata
#llvm-cov-10 show -ignore-filename-regex=test_stack.cpp -ignore-filename-regex=makham* -ignore-filename-regex=doctest* -ignore-filename-regex=type* -ignore-filename-regex=parser* -ignore-filename-regex=operation.?pp bin/test_stack -instr-profile=bin/test_stack.llvm-profdata
#llvm-cov-10 report -ignore-filename-regex=test_stack.cpp -ignore-filename-regex=makham* -ignore-filename-regex=doctest* -ignore-filename-regex=type* -ignore-filename-regex=parser* -ignore-filename-regex=operation.?pp bin/test_stack -instr-profile=bin/test_stack.llvm-profdata

## repl
#rm bin/repl
#clang++-10 -v -fprofile-instr-generate -fcoverage-mapping -fcoroutines-ts -std=c++20 -Werror -fdiagnostics-show-option -Wall -Wextra -Wpedantic -I include -I makham/include -I makham/include/felspar/makham -I doctest src/repl.cpp -stdlib=libc++ bin/libtype.a -o bin/repl
#perf stat bin/repl --help

